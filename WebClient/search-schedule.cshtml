@{
    Layout = "~/_Layout.cshtml";
}
@using System.Web.Optimization;
@section CustomCss{
    <style type="text/css">
        body {
            padding-top: 60px;
            padding-bottom: 40px;
        }

        .sidebar-nav {
            padding: 9px 0;
        }
    </style>
}
@section FooterJs{
    <script type="text/javascript">
        var server = "@System.Configuration.ConfigurationManager.AppSettings["server"]";
        var apiPort = "@System.Configuration.ConfigurationManager.AppSettings["apiPort"]";
        var wsPort = "@System.Configuration.ConfigurationManager.AppSettings["wsPort"]";
    </script>

    @Scripts.Render("~/bundles/search-schedule")
}
@section TopMenu{
    <li class="active"><a href="~/search-schedule">Search Schedule</a></li>
    <li><a href="~/train">Train</a></li>
    <li><a href="~/live">Live Feed</a></li>
}
<div class="row-fluid">
    <div class="span2">
        <div class="well sidebar-nav" id="locationDetails">
            <ul class="nav nav-list">
                <li class="nav-header">Commands</li>
                <li><a href="#listorigin:" onclick="setCommand('listorigin:');"><strong>List Trains Originating From:</strong><br />
                    &nbsp;&nbsp;listorigin:[stanox]</a></li>
                <li><a href="#listorigin-crs:" onclick="setCommand('listorigin-crs:');"><strong>List Trains Originating From:</strong><br />
                    &nbsp;&nbsp;listorigin-crs:[CRS]</a></li>
                <li><a href="#listorigin:" onclick="setCommand('liststation:');"><strong>List Trains Calling At:</strong><br />
                    &nbsp;&nbsp;liststation:[stanox]</a></li>
                <li><a href="#listorigin-crs:" onclick="setCommand('liststation-crs:');"><strong>List Trains Calling At:</strong><br />
                    &nbsp;&nbsp;liststation-crs:[CRS]</a></li>
            </ul>
        </div>
        <div class="well sidebar-nav" id="stationDetails">
            <ul class="nav nav-list">
                <li class="nav-header" data-bind="text: stationName">Station Details</li>
                <li><strong>CRS:</strong><span data-bind="text: locationCRS"></span></li>
                <li><a data-bind="attr: { href :'search-schedule#listorigin:' + locationStanox(), onclick: 'setHash(\'listorigin:' + locationStanox() + '\');' }" title="View Trains Starting from this station">Trains Starting From</a></li>
                <li><a data-bind="attr: { href :'search-schedule#liststation:' + locationStanox(), onclick: 'setHash(\'liststation:' + locationStanox() + '\');' }" title="View Trains Calling from this station">Trains Calling At</a></li>
            </ul>
        </div>
        <div class="well sidebar-nav">
            <p class="centerText" style="padding: 2px;">
                At the moment this only shows Activated Schedules.<br />
                Empty rows are activations not matched to a schedule.
            </p>
        </div>
    </div>
    <!--/span2-->
    <div class="span10">
        <div class="row alert alert-info" id="no-results-row" style="display: none">
            <strong>No Results Found</strong>
        </div>
        <div class="row btn-group">
            <div class="input-prepend">
                <span class="add-on"><i class="icon-asterisk"></i></span>
                <input type="text" id="filter-command" class="span9" placeholder="Enter Command" />&nbsp;&nbsp;&nbsp;
                        <a class="btn btn_disconnect" id="btn_Command" onclick="parseCommand();" title="Send Command"><i class="icon-arrow-right"></i></a>
                <a class="btn" href="#" title="Clear data" onclick="clearData();"><i class="icon-remove"></i></a>
            </div>
        </div>
        <div class="progress progress-striped active hide">
            <div class="bar" style="width: 100%"></div>
        </div>
        <div class="row">
            <table class="table table-hover table-bordered table-header-colour" id="origin-search-results" data-bind="visible: Trains().length > 0">
                <thead class="header">
                    <tr>
                        <th><a style="cursor: pointer;" onclick="previousDate(); return false;" title="Previous Day">&lt;&nbsp;<span data-bind="text: PreviousDay"></span></a></th>
                        <th colspan="8" class="centerText" data-bind="text: Day"></th>
                        <th><a style="cursor: pointer;" onclick="nextDate(); return false;" title="Next Day"><span data-bind="text: NextDay"></span>&nbsp;&gt;</a></th>
                    </tr>
                    <tr>
                        <th colspan="2"></th>
                        <th colspan="2">From</th>
                        <th colspan="2">Departure</th>
                        <th colspan="2">To</th>
                        <th colspan="2">Arrival</th>
                    </tr>
                    <tr>
                        <th>Train ID</th>
                        <th>Operator</th>
                        <th>Station</th>
                        <th>Platform</th>
                        <th>Public</th>
                        <th>WTT</th>
                        <th>Station</th>
                        <th>Platform</th>
                        <th>Public</th>
                        <th>WTT</th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: Trains">
                    <tr data-bind="css: { error: Cancellation }, attr: { title: Tooltip }">
                        <td><a data-bind="text: TrainId, attr: { href: 'train#gettrain:' + TrainId() + ':' + TrainUid() }"></a></td>
                        <td data-bind="text: AtocCode.Code, attr: { title: AtocCode.Name }"></td>
                        <td data-bind="text: Origin.Description"></td>
                        <td data-bind="text: Origin.Platform"></td>
                        <td data-bind="text: Origin.PublicDeparture"></td>
                        <td data-bind="text: Origin.Departure"></td>
                        <td data-bind="text: Destination.Description"></td>
                        <td data-bind="text: Destination.Platform"></td>
                        <td data-bind="text: Destination.PublicArrival"></td>
                        <td data-bind="text: Destination.Arrival"></td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <th><a style="cursor: pointer;" onclick="previousDate(); return false;" title="Previous Day">&lt;&nbsp;<span data-bind="text: PreviousDay"></span></a></th>
                        <th colspan="8" class="centerText" data-bind="text: Day"></th>
                        <th><a style="cursor: pointer;" onclick="nextDate(); return false;" title="Next Day"><span data-bind="text: NextDay"></span>&nbsp;&gt;</a></th>
                    </tr>
                </tfoot>
            </table>
            <table class="table table-hover table-bordered table-header-colour" id="callingAt-search-results" data-bind="visible: Trains().length > 0">
                <thead class="header">
                    <tr>
                        <th><a style="cursor: pointer;" onclick="previousCallingAtDate(); return false;" title="Previous Day">&lt;&nbsp;<span data-bind="text: PreviousDay"></span></a></th>
                        <th colspan="7" class="centerText" data-bind="text: Day"></th>
                        <th><a style="cursor: pointer;" onclick="nextCallingAtDate(); return false;" title="Next Day"><span data-bind="text: NextDay"></span>&nbsp;&gt;</a></th>
                    </tr>
                    <tr>
                        <th colspan="2"></th>
                        <th>From</th>
                        <th></th>
                        <th colspan="2">Arrival</th>
                        <th colspan="2">Departure</th>
                        <th>To</th>
                    </tr>
                    <tr>
                        <th>Train ID</th>
                        <th>Operator</th>
                        <th>Station</th>
                        <th>Platform</th>
                        <th>Public</th>
                        <th>WTT</th>
                        <th>Public</th>
                        <th>WTT</th>
                        <th>Station</th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: Trains">
                    <tr data-bind="css: { pass: Pass, cancel: Cancellation,  }, attr: { title: Tooltip }">
                        <td><a data-bind="text: TrainId, attr: { href: 'train#gettrain:' + TrainId() + ':' + TrainUid() }"></a></td>
                        <td data-bind="text: AtocCode.Code, attr: { title: AtocCode.Name }"></td>
                        <td data-bind="text: Origin.Description"></td>
                        <td data-bind="text: Origin.Platform"></td>
                        <td data-bind="text: Origin.PublicArrival, visible: !Pass()"></td>
                        <td data-bind="text: Pass() ? 'Pass' : Origin.Arrival, attr: { colspan: Pass() ? 2 : 0 }"></td>
                        <td data-bind="text: Destination.PublicDeparture, visible: !Pass()"></td>
                        <td data-bind="text: Pass() ? Pass : Destination.Departure, attr: { colspan: Pass() ? 2 : 0 }"></td>
                        <td data-bind="text: Destination.Description"></td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <th><a style="cursor: pointer;" onclick="previousCallingAtDate(); return false;" title="Previous Day">&lt;&nbsp;<span data-bind="text: PreviousDay"></span></a></th>
                        <th colspan="7" class="centerText" data-bind="text: Day"></th>
                        <th><a style="cursor: pointer;" onclick="nextCallingAtDate(); return false;" title="Next Day"><span data-bind="text: NextDay"></span>&nbsp;&gt;</a></th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
    <!--/span10-->
</div>
<!--/row-fluid-->
